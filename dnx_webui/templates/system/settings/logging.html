{% extends('layout.html') %}
{% block body %}
<section {{ section_bg|safe }} id="logging" class="section {{main_section_color}}">
    <div class="container">
        <div class="row row-flex">
            <div class="col s12 m6">
                <div class="card-panel card-panel-eql z-depth-2 hoverable {{card_color}}">
                    <h4 class="{{title_color}}">Logging</h4>
                    <form action="/system/settings/logging" method="POST">
                        <input type="hidden" name="tab" value="1">
                        <input type="hidden" name="logging_update">
                        <div class="row">
                            <div class="input-field col s12 {{input_color}}">
                                <select name="length" id="length" onchange="this.form.submit()">
                                    <option value="30" {% if logging_settings['logging']['length'] == 30 %} selected
                                        {% endif %}>30</option>
                                    <option value="45" {% if logging_settings['logging']['length'] == 45 %} selected
                                        {% endif %}>45</option>
                                    <option value="60" {% if logging_settings['logging']['length'] == 60 %} selected
                                        {% endif %}>60</option>
                                    <option value="90" {% if logging_settings['logging']['length'] == 90 %} selected
                                        {% endif %}>90</option>
                                </select>
                                <label for="length">Length (Days)</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12 {{input_color}}">
                                    <select name="level" id="level" onchange="this.form.submit()">
                                        {% for level in logging_settings['logging']['log_levels'] %}
                                        {% set level_num = loop.index0 %}
                                        {% if logging_settings['logging']['level'] == level_num %}
                                        <option value="{{level_num}}" selected>{{level_num}}: {{level}}</option>
                                        {% else %}
                                        <option value="{{level_num}}">{{level_num}}: {{level}}</option>
                                        {% endif %}
                                        {% endfor %}
                                    </select>
                                <label for="level">Log Level (Severity)</label>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col s12 m6">
                <div class="card-panel card-panel-eql z-depth-2 hoverable {{card_color}}">
                    <h4 class="{{title_color}}">Select Time Offset</h4>
                    <h6>System Time: {{logging_settings['system']}}</h6>
                    <h6>Time Offset: {{logging_settings['local']}}</h6>
                    <br>
                    <form action="/system/settings/logging" method="POST">
                        <input type="hidden" name="tab" value="1">
                        <input type="hidden" name="time_offset_update">
                        <div class="row">
                            <div class="input-field col s6 {{input_color}}">
                                <label>
                                    Direction
                                    <select name="dir_offset">
                                        {% if logging_settings['offset']['direction']=='+'
                                            or logging_settings['offset']['amount']==0 %}
                                        <option value="+" selected>+</option>
                                        <option value="-">-</option>
                                        {% else %}
                                        <option value="+">+</option>
                                        <option value="-" selected>-</option>
                                        {% endif %}
                                    </select>
                                </label>
                            </div>
                            <div class="input-field col s6 {{input_color}}">
                                <label>
                                    Time Offset
                                    <input type="number" name="time_offset" min="0" max="14" value="{{logging_settings['offset']['amount']}}">
                                </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="input-field col s12 m4 offset-m4 center">
                                <button class="btn waves-effect waves-light col s12">Update</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col s12 m2"></div>
        </div>
    </div>
</section>
{% endblock %}
